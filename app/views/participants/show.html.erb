<%
  active_tab = params[:tab]
  active_tab = 'challenges' unless ['teams','bio'].include?(active_tab)
%>

<%= render partial: 'masthead', locals: { participant: @participant } %>

<!-- sub-nav bar -->
<div class="sub-nav-bar sticky-top">
  <div class="container-fluid">
    <ul class="nav tabs">
      <li class="nav-item">
        <a class="nav-link nav-link-01<%= ' active' if active_tab == 'challenges' %>" data-toggle='tab' href="#tab-challenges" onclick="return false;">Challenges</a>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-link-02<%= ' active' if active_tab == 'teams' %>" data-toggle='tab' href="#tab-teams" onclick="return false;">Teams</a>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-link-03" href="<%= @discourse_link %>">Posts</a>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-link-04<%= ' active' if active_tab == 'bio' %>" data-toggle='tab' href="#tab-bio" onclick="return false;">Bio</a>
      </li>
      <!-- more dropdown xs -->
      <li class="nav-item dropdown more-xs">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false"><svg width="16" height="4" xmlns="http://www.w3.org/2000/svg"><path d="M2 0C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM8 0C6.9 0 6 .9 6 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill="#5D5F60" fill-rule="nonzero"/></svg></a>
        <div class="dropdown-menu dropdown-menu-right">
          <a class="dropdown-item" href="#">Bio</a>
        </div>
      </li>
      <!-- /more dropdown xs -->
    </ul>
  </div>
</div>
<!-- /sub-nav bar -->

<div class="tab-content">
  <div id='tab-challenges' class="tab-pane fade<%= ' show active' if active_tab == 'challenges' %>">
    <% if @challenges.any? %>
      <section class="section-p-sm bg-light">
        <div class="container-fluid">
          <div class="row">
            <%= render partial: 'shared/challenges/listing', locals: { challenges: @challenges } %>
          </div>
        </div>
      </section>
    <% else %>
      <section class="section-p-md">
        <div class="container-fluid">
          <div class="row">
            <div class="col-12">
              <div class="md-content">
                <%= "#{@participant.name} hasn't entered any challenges yet..." %>
              </div>
            </div>
          </div>
        </div>
      </section>
    <% end %>
  </div>

  <div id="tab-teams" class="tab-pane fade<%= ' show active' if active_tab == 'teams' %>">
    <%= render partial: 'teams_list' %>
  </div>

  <div id='tab-bio' class="tab-pane fade<%= ' show active' if active_tab == 'bio' %>">
  <!-- section -->
    <section class="section-p-md">
      <div class="container-fluid">
        <div class="row">
          <div class="col-12">
            <div class="md-content">
              <% if @participant.bio.present? %>
                <%= @participant.bio %>
              <% else %>
                <%= "#{@participant.name} has not provided any information yet." %>
              <% end %>
            </div>

          </div>
        </div>
      </div>
    </section>
    <!-- /section -->
  </div>
</div>
